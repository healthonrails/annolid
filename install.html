

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Install Annolid &mdash; annolid v1.0.1 documentation</title>

  
      <script src="_static/jquery.js"></script>
      <script src="_static/underscore.js"></script>
      <script src="_static/doctools.js"></script>
      <script src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Extract desired number of frames from a video based on optical flow" href="extract_frames.html" />
    <link rel="prev" title="Annolid User Guide" href="guide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            annolid
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="guide.html">Annolid User Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Install Annolid</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#set-up-anaconda-virtual-environment">Set up Anaconda virtual environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-ffmpeg">Install ffmpeg</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Install Annolid</a></li>
<li class="toctree-l2"><a class="reference internal" href="#if-you-encounter-errors-on-windows-for-pycocotools-please-download-and-install-visual-studio-2019-from-the-link-below">If you encounter errors On Windows for pycocotools, please download and install Visual studio 2019 from the link below.</a></li>
<li class="toctree-l2"><a class="reference internal" href="#to-fix-error-failed-to-load-platform-plugin-xcb-while-launching-qt5-app-on-linux">To fix error,  “Failed to load platform plugin “xcb” while launching qt5 app on Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="#launch-annolid">Launch Annolid</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#install-detectron2-locally">Install Detectron2 locally</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-detectron2-dependencies">Install Detectron2 dependencies:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-detectron2">Install Detectron2:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#install-detectron2-on-google-colab">Install Detectron2 on Google Colab</a></li>
<li class="toctree-l1"><a class="reference internal" href="#optional-install-older-version-of-pytorch-for-yolact">Optional: Install older version of Pytorch for YOLACT</a></li>
<li class="toctree-l1"><a class="reference internal" href="extract_frames.html">Extract desired number of frames from a video based on optical flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="extract_frames.html#display-optical-flow-while-extracting-frames-with-show-flow-true">Display optical flow while extracting frames with <strong>–show_flow=True</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="extract_frames.html#save-all-the-frames-as-images">Save all the frames as images</a></li>
<li class="toctree-l1"><a class="reference internal" href="extract_frames.html#select-frames-randomly-by-reservoir-sampling">Select frames randomly by reservoir sampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="extract_frames.html#extract-all-the-key-frames-from-a-video-used-by-the-compression-methods">Extract all the key frames from a video used by the compression methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="track_animals.html">Track animals and Auto labeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="track_animals.html#output-csv-format">Output CSV format</a></li>
<li class="toctree-l1"><a class="reference internal" href="track_animals.html#cutie-dino-body-part-tracker">Cutie + DINO Body-Part Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="keypoints_definitions.html">Config keypoint connection rules, events, and instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html">Threshold based object segmenation</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html#convert-wmv-format-to-mp4-format-using-ffmpeg">Convert WMV format to mp4 format using ffmpeg</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html#save-the-extracted-frames-to-a-user-selected-output-directory">Save the extracted frames to a user selected output directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html#how-to-track-multiple-objects-in-the-video">How to track multiple objects in the video?</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html#how-to-convert-coco-annonation-format-to-yolov5-format">How to convert coco annonation format to YOLOV5 format?</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html#how-to-train-a-custom-yolov5-model">How to train a custom YOLOV5 model?</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html#how-to-track-objects-in-a-video-with-the-trained-model">How to track objects in a video with the trained model?</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html#how-to-convert-labelme-labeled-dataset-to-coco-format">How to convert labelme labeled dataset to COCO format?</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html#how-to-train-a-yolact-model-with-a-custom-dataset">How to train a YOLACT model with a custom dataset?</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html#how-to-evaluate-a-video-based-on-a-trained-model">How to evaluate a video based on a trained model?</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html#convert-the-tracking-results-csv-file-to-glitter2-csv-format">Convert the tracking results csv file to Glitter2 csv format</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html#convert-the-keypoint-annotations-to-labelme-format">Convert the keypoint annotations to labelme format</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">annolid</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Install Annolid</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/install.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="install-annolid">
<h1>Install Annolid<a class="headerlink" href="#install-annolid" title="Permalink to this headline">¶</a></h1>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Ubuntu / macOS / Windows</p></li>
<li><p>Python &gt;= 3.6</p></li>
<li><p>[PyQt4 / PyQt5]</p></li>
</ul>
</div>
<div class="section" id="set-up-anaconda-virtual-environment">
<h2>Set up Anaconda virtual environment<a class="headerlink" href="#set-up-anaconda-virtual-environment" title="Permalink to this headline">¶</a></h2>
<p>To run Annolid, we suggest using the Anaconda package/environment manager for Python (free for personal use).  Download and install the <a class="reference external" href="https://www.anaconda.com/products/individual">Anaconda</a> environment first.  Then do the following, using the bash shell in Linux or the conda command line (= Anaconda Prompt) in Windows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># For MacOS or Linux</span>
<span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span><span class="o">=</span><span class="n">annolid</span> <span class="n">python</span><span class="o">=</span><span class="mf">3.7</span>
<span class="n">source</span> <span class="n">activate</span> <span class="n">annolid</span>
<span class="c1"># conda install -c conda-forge pyside2</span>
<span class="c1"># conda install pyqt</span>
<span class="c1"># pip install pyqt5  # pyqt5 can be installed via pip on python3</span>
<span class="c1"># conda install git</span>
</pre></div>
</div>
<p>Commented-out lines are optional; use them if necessary.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># For Windows</span>
<span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span><span class="o">=</span><span class="n">annolid</span> <span class="n">python</span><span class="o">=</span><span class="mf">3.7</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">annolid</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">pyside2</span>
<span class="n">conda</span> <span class="n">install</span> <span class="n">git</span>
</pre></div>
</div>
<p>This creates a virtual environment called “annolid” into which you will install Annolid and all of its dependencies, along with whatever other Python tools you may need.  Python 3.7 is recommended, as it is the version being used for Annolid development.</p>
</div>
<div class="section" id="install-ffmpeg">
<h2>Install ffmpeg<a class="headerlink" href="#install-ffmpeg" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">-c</span> <span class="pre">conda-forge</span> <span class="pre">ffmpeg</span></code></p>
</div>
<div class="section" id="id1">
<h2>Install Annolid<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Clone the code repo from Github, change into the new directory, and install</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone --recurse-submodules https://github.com/healthonrails/annolid.git
<span class="nb">cd</span> annolid 

<span class="c1"># install the package (be sure to include the space and the period after the -e)</span>
pip install -e .
</pre></div>
</div>
<p>Note: if you get the following error, please try to install <a class="reference external" href="https://ffmpeg.org/">ffmpeg</a> and then install decord from source as described <a class="reference external" href="https://github.com/dmlc/decord">here</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span><span class="p">:</span> <span class="n">Could</span> <span class="ow">not</span> <span class="n">find</span> <span class="n">a</span> <span class="n">version</span> <span class="n">that</span> <span class="n">satisfies</span> <span class="n">the</span> <span class="n">requirement</span> <span class="n">decord</span><span class="o">&gt;=</span><span class="mf">0.4</span><span class="o">.</span><span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="section" id="if-you-encounter-errors-on-windows-for-pycocotools-please-download-and-install-visual-studio-2019-from-the-link-below">
<h2>If you encounter errors On Windows for pycocotools, please download and install Visual studio 2019 from the link below.<a class="headerlink" href="#if-you-encounter-errors-on-windows-for-pycocotools-please-download-and-install-visual-studio-2019-from-the-link-below" title="Permalink to this headline">¶</a></h2>
<p>https://visualstudio.microsoft.com/thank-you-downloading-visual-studio/?sku=Community&amp;rel=16</p>
<p>Then please run the following command in your terminal.
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">&quot;git+https://github.com/philferriere/cocoapi.git#egg=pycocotools&amp;subdirectory=PythonAPI&quot;</span></code></p>
</div>
<div class="section" id="to-fix-error-failed-to-load-platform-plugin-xcb-while-launching-qt5-app-on-linux">
<h2>To fix error,  “Failed to load platform plugin “xcb” while launching qt5 app on Linux<a class="headerlink" href="#to-fix-error-failed-to-load-platform-plugin-xcb-while-launching-qt5-app-on-linux" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">--reinstall</span> <span class="pre">libxcb-xinerama0</span></code></p>
</div>
<div class="section" id="launch-annolid">
<h2>Launch Annolid<a class="headerlink" href="#launch-annolid" title="Permalink to this headline">¶</a></h2>
<p>Typing “annolid” will bring up the Annolid GUI, which is based on the excellent <a class="reference external" href="https://github.com/wkentaro/labelme">LabelMe</a> package.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># be sure to activate the annolid virtual environment every time you restart Anaconda; the conda shell prompt should read &quot;(annolid)&quot;</span>
<span class="nb">source</span> activate annolid   <span class="c1"># on Linux/MacOS</span>
conda activate annolid    <span class="c1"># on Windows</span>
<span class="c1"># then start Annolid (a GUI window will appear)</span>
annolid

<span class="c1"># Optionally, you can use a predefined label.txt file as follows.</span>
annolid --labels<span class="o">=</span>/path/to/labels_custom.txt 
</pre></div>
</div>
</div>
</div>
<div class="section" id="install-detectron2-locally">
<h1>Install Detectron2 locally<a class="headerlink" href="#install-detectron2-locally" title="Permalink to this headline">¶</a></h1>
<p><strong>Note</strong>: if you intend to process your tagged videos using Google Colab (which you should do unless you are using a workstation with a higher-end GPU), then <strong>you do not need to install Detectron2 on your local machine</strong>, and you can ignore the following steps.</p>
<div class="section" id="id2">
<h2>Requirements<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Windows, Linux or macOS with Python ≥ 3.7</p></li>
<li><p>PyTorch ≥ 1.5 and <a class="reference external" href="https://github.com/pytorch/vision/">torchvision</a> that matches the PyTorch installation.
Install them together at <a class="reference external" href="https://pytorch.org">pytorch.org</a> to make sure of this.<br />Presently, the combination of torch 1.8 and torchvision 0.9.1 works well, along with pyyaml 5.3, as shown below.<br />For purposes of using Annolid, it is OK to downgrade pyyaml from its current version to 5.3.</p></li>
</ul>
</div>
<div class="section" id="install-detectron2-dependencies">
<h2>Install Detectron2 dependencies:<a class="headerlink" href="#install-detectron2-dependencies" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pyyaml</span><span class="o">==</span><span class="mf">5.3</span> 
<span class="n">pip</span> <span class="n">install</span> <span class="n">pycocotools</span><span class="o">&gt;=</span><span class="mf">2.0</span><span class="o">.</span><span class="mi">1</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">torch</span><span class="o">==</span><span class="mf">1.9</span><span class="o">.</span><span class="mi">0</span><span class="o">+</span><span class="n">cu102</span> <span class="n">torchvision</span><span class="o">==</span><span class="mf">0.10</span><span class="o">.</span><span class="mi">0</span><span class="o">+</span><span class="n">cu102</span> <span class="o">-</span><span class="n">f</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="o">.</span><span class="n">pytorch</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">whl</span><span class="o">/</span><span class="n">torch_stable</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
</div>
<div class="section" id="install-detectron2">
<h2>Install Detectron2:<a class="headerlink" href="#install-detectron2" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference external" href="https://detectron2.readthedocs.io/tutorials/install.html">https://detectron2.readthedocs.io/tutorials/install.html</a> for further information.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import torch
assert torch.__version__.startswith(&quot;1.9&quot;)    
pip install detectron2 -f https://dl.fbaipublicfiles.com/detectron2/wheels/cu102/torch1.9/index.html

### Install Detectron2 on Windows 10

`git clone https://github.com/facebookresearch/detectron2.git`
`cd detectron2`
`pip install -e .`
</pre></div>
</div>
<p>Note. If you encounter an error  on windows with message says:</p>
<p><code class="docutils literal notranslate"><span class="pre">in</span> <span class="pre">_run_ninja_build</span> <span class="pre">raise</span> <span class="pre">RuntimeError(message)</span> <span class="pre">RuntimeError:</span> <span class="pre">Error</span> <span class="pre">compiling</span> <span class="pre">objects</span> <span class="pre">for</span> <span class="pre">extension</span></code>
Please go to the link https://support.microsoft.com/en-us/topic/the-latest-supported-visual-c-downloads-2647da03-1eea-4433-9aff-95f26a218cc0
and  download <code class="docutils literal notranslate"><span class="pre">x64:</span> <span class="pre">vc_redist.x64.exe</span></code>.
Please click and install it.
After restart, you can cd to detectron2 folder and run the following command.
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span></code>.</p>
</div>
</div>
<div class="section" id="install-detectron2-on-google-colab">
<h1>Install Detectron2 on Google Colab<a class="headerlink" href="#install-detectron2-on-google-colab" title="Permalink to this headline">¶</a></h1>
<p>Instructions will be posted here presently.  (Colab uses CUDA 10.2 + torch 1.9.0).<br /><a href="https://colab.research.google.com/github/healthonrails/annolid/blob/master/docs/tutorials/Annolid_on_Detectron2_Tutorial.ipynb" target="_blank"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/></a></p>
</div>
<div class="section" id="optional-install-older-version-of-pytorch-for-yolact">
<h1>Optional: Install older version of Pytorch for YOLACT<a class="headerlink" href="#optional-install-older-version-of-pytorch-for-yolact" title="Permalink to this headline">¶</a></h1>
<p>Note: YOLACT models are less accurate comparing to Mask-RCNN in Detectron2. However, it is faster in terms of inference.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># DCNv2 will not work if Pytorch is greater than 1.4.0
!pip install torchvision==0.5.0
!pip install torch==1.4.0
</pre></div>
</div>
<p>For more information, please check https://github.com/healthonrails/annolid/blob/master/docs/tutorials/Train_networks_tutorial_v1.0.1.ipynb and https://github.com/healthonrails/yolac.</p>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="guide.html" class="btn btn-neutral float-left" title="Annolid User Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="extract_frames.html" class="btn btn-neutral float-right" title="Extract desired number of frames from a video based on optical flow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Chen Yang.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>