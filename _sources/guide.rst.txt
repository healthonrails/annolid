Annolid User Guide
===================

Overview
--------

Annolid is an instance segmentation based tracking and behavioral analysis package for videos.

It supports instance segmentation based tracking, and behavioral analysis.


.. image:: https://raw.githubusercontent.com/healthonrails/annolid/master/docs/imgs/annolid_workflow.png


Figure 1. Overview of Annolid workflow.

The tracking result CSV files can be imported
into Glitter2 for correction or analysis.

Video guide
-----------

Following is a video for instance segmentation based pose estimation.

Please see the `Install Annolid <https://healthonrails.github.io/annolid/install.html>`_ section for instructions on how to download and install Annolid.

Pose estimation
~~~~~~~~~~~~~~~~~~~~

This video shows pose estimation results based on instance segmentation methods.

.. raw:: html

    <iframe width="560" height="315" src="https://www.youtube.com/embed/op3A4_LuVj8" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

|
|

Optical flow estimation
~~~~~~~~~~~~~~~~~~~~~~~~

This video shows self-supervised optical flow estimation in Annolid.

.. raw:: html

    <iframe width="560" height="315" src="https://www.youtube.com/embed/EpQ9JPZgcYE" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

|
|

Extract frames
~~~~~~~~~~~~~~~~~~~~~~~~

In this video, we'll show you how to extract frames frome a video.

First, start the `Annolid` GUI. Click Extract frames in the toolbar list.
When the dialog opens, click the and select the video file. 
You can choose the start and end seconds if you want extract frames in the given time interval. 
Use random algorithm and select the desired number of frames.
The waiting time depends on the video length, and the algorimth that were selected. It might take a while to finish. 
When the process is done, it will load all the images into canvas for labeling. 
You can check the extract frames by clicking the files in the file list. 

.. raw:: html

    <iframe width="560" height="315" src="https://www.youtube.com/embed/fx0ryaXpdEc" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

|
|

Label Zones 
~~~~~~~~~~~~~~~~~~~~~~~~

In this video, we'll show you how to label zones and non-moving objects in a video frame.

.. raw:: html

    <iframe width="560" height="315" src="https://www.youtube.com/embed/zX8cUImRI_s" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

|
|

Save labels
~~~~~~~~~~~~~~~~~~~~~~~~

In this video, we'll show you how to save labels for your dataset.

.. raw:: html

    <iframe width="560" height="315" src="https://www.youtube.com/embed/pb8X4bqLRZ0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

|
|

Create your COCO format dataset
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In this video, we'll show you how to create your dataset in COCO format.

.. raw:: html

    <iframe width="560" height="315" src="https://www.youtube.com/embed/_oNGc_44eZ8" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

|
|


Install and run Detectron2 in Google Colab
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In this video, we'll show you how to install and run Detectron2 in Google Colab.

.. raw:: html

    <iframe width="560" height="315" src="https://www.youtube.com/embed/iQRVR7GPBH0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

|
|

Upload and visualize your dataset in Detectron2 Colab
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In this video, we'll show you how to upload and visualize your dataset in Detectron2 Colab.

.. raw:: html

    <iframe width="560" height="315" src="https://www.youtube.com/embed/7zYNRfY0yy4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


|
|

Train and fine-tune a COCO-pretrained Mask R-CNN model in Detectron2 Colab
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In this video, we'll show you how to train and fine-tune a COCO-pretrained Mask R-CNN model in Detectron2 Colab.

.. raw:: html

    <iframe width="560" height="315" src="https://www.youtube.com/embed/n7VDmh3LFRk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


|
|

Inference on a test video in Detectron2 Colab
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In this video, we'll show you how to perform instance segmentation on a test video in Detectron2 Colab.

.. raw:: html

    <iframe width="560" height="315" src="https://www.youtube.com/embed/eiF5TpZ796E" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


|
|

Save and download the tracking results from Detectron2 Colab
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In this video, we'll show you how to download and save the tracking results from Detectron2 Colab.

.. raw:: html

    <iframe width="560" height="315" src="https://www.youtube.com/embed/vshDSMpYhgw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

|
|

Convert instance segmentation results to Glitter2 format
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In this video, we'll show you how to convert instance segmentation results to Glitter2 format.

.. raw:: html

    <iframe width="560" height="315" src="https://www.youtube.com/embed/QW8dhAVNsk0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

|
|